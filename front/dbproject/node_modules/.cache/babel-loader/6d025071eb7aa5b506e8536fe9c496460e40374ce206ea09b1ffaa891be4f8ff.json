{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-768c4458\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"ssqtitletest\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", null, \"火 炬 行 动\")], -1 /* HOISTED */));\nconst _hoisted_2 = {\n  class: \"content\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: \"container\",\n    onWheelPassive: _cache[6] || (_cache[6] = _withModifiers(() => {}, [\"stop\"]))\n  }, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"textarea\", {\n    id: \"content\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.content = $event),\n    cols: \"60\",\n    rows: \"30\",\n    readonly: \"readonly\",\n    class: \"myTextStyle\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.content]]), _hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.message = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.message]]), _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[2] || (_cache[2] = $event => $options.sendMsg())\n  }, \"发送消息\"), _hoisted_4, _hoisted_5, _createTextVNode(\" 用户：\"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.user = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.user]]), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = $event => $options.joinRoom())\n  }, \"加入群聊\"), _createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = $event => $options.exitRoom())\n  }, \"退出群聊\")])], 32 /* HYDRATE_EVENTS */);\n}","map":{"version":3,"names":["_createElementVNode","class","_createElementBlock","_hoisted_1","_hoisted_2","id","$data","content","$event","cols","rows","readonly","_hoisted_3","type","message","onClick","_cache","$options","sendMsg","_hoisted_4","_hoisted_5","user","joinRoom","exitRoom"],"sources":["D:\\Work\\大三上\\java\\endOfTermProj\\Java-EE-Police-Affair-System\\front\\dbproject\\src\\components\\SecretChat.vue"],"sourcesContent":["<template>\n  <div class=\"container\" @wheel.passive.stop>\n  <div class=\"ssqtitletest\"><span>火&nbsp;炬&nbsp;行&nbsp;动</span></div>\n  <div class=\"content\">\n  \n  <textarea id=\"content\" v-model=\"content\" cols=\"60\" rows=\"30\" readonly=\"readonly\" class=\"myTextStyle\"></textarea><br>\n  <input type=\"text\" v-model=\"message\">\n  <button type=\"button\" @click=\"sendMsg()\">发送消息</button>\n  <br/><br/>\n  用户：<input type=\"text\" v-model=\"user\">\n  <button @click=\"joinRoom()\">加入群聊</button>\n  <button @click=\"exitRoom()\">退出群聊</button>\n  </div>\n  </div>\n</template>\n<script>\nimport WebSocket from 'ws';\nexport default {\ndata() {\n  return {\n    url: 'ws://localhost:7078/Room/',\n    ws: null,\n    user: '',\n    message: '',\n    content: '',\n  }\n},\ncreated(){\n},\nmethods: {\n  async joinRoom(){\n    if(this.ws) {\n      alert(\"你已经再聊天室\");\n      return;\n    }\n    let url = this.url;\n    let username = this.user;\n    this.ws = new WebSocket('wss://localhost:7078/Room/' + username);  // 后端的启动端口\n    this.ws.onopen = this.webscoketonopen;\n    this.ws.onmessage =  this.webscoketonmessage;\n    //发生错误触发\n    this.ws.onerror = function (event) {\n      console.log(\"连接错误\"+event)\n    };\n    //正常关闭触发\n    this.ws.onclose = function () {\n      console.log(\"连接关闭\");\n    };\n  }, \n  webscoketonopen(){\n    console.log(\"与服务器成功建立连接\");\n  },\n  webscoketonmessage(value){\n    console.log(value);\n    this.content += (value.data + '\\r\\n') ;\n  },\n  exitRoom(){\n    this.closeWebSocket();\n  },\n  sendMsg(){\n    if(!this.ws) {\n      alert('你已经掉线，请重新加入');\n      return;\n    }\n    if(this.ws.readyState === 1){\n      this.ws.send(this.message);\n      this.message = '';\n    } else {\n      alert('发送失败');\n    }\n  },\n  closeWebSocket(){\n    if(this.ws) {\n      this.ws.close();\n      this.ws = null;\n    }\n  },\n  talking(content) {\n    console.log(content);\n  }\n}\n}\n</script>\n<style scoped>\n  .container {\n    /* width: 80vw;\n    height: 130vh;  /* width: 80vw;\n    height: 130vh; */\n    /* background-color: #f4f6f9; */\n    margin-top:10vh;\n    min-width: 700px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n.content {\n    width: 50%;\n    min-width: 1000px;\n    position: relative;\n    box-shadow: 0px 0px 10px 2px rgba(123, 103, 75, 0.427);\n    background-color: rgba(255, 255, 255, 0.616); \n    margin-bottom: 30px;\n    left:200px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n    margin-top: 16px;\n    padding: 16px;\n    border-radius: 5px;\n    box-shadow: #9a9a9a 0px 0px 6px;\n    box-shadow: #777777 0px 0px 3px;\n    border-top: #0051ff 3px solid;\n    border-top: solid 3px transparent;\n  }\n  \n  .content:hover {\n    border-top-color: #0051ff;\n  }\n  \n  .content {\n    transition: border-top-color 0.3s;\n  }\n  \n  .content:hover {\n    transition: border-top-color 0.3s;\n  }\n.roomStyle{\ntext-align: center;\nbackground-color: #e6dbc1;\nmargin: 0 auto;\nborder: 1px solid #000;\nwidth: 800px;\nheight: 650px\n}\n.myTextStyle{\n  width: 700px;\n}\n.ssqtitletest {\n    margin:10px auto;\n    min-width:800px;\n    height:40px;\n    padding:0 30px;\n    line-height: 60px;\n    text-align: center;\n    position: relative;\n    appearance: none;\n    background: #0051ff;\n    box-shadow: inset -500px 0px 100px 0px rgb(204, 186, 144);\n    border: none;\n    color: white;\n    font-size: 25px;\n    outline: none;\n    overflow: hidden;\n    border-radius: 0px;\n  }\n</style>"],"mappings":";;gEAEEA,mBAAA,CAAmE;EAA9DC,KAAK,EAAC;AAAc,I,aAACD,mBAAA,CAAmC,cAA7B,SAAsB,E;;EACjDC,KAAK,EAAC;AAAS;gEAE4FD,mBAAA,CAAI;gEAGpHA,mBAAA,CAAK;gEAAAA,mBAAA,CAAK;;;uBAPVE,mBAAA,CAYM;IAZDD,KAAK,EAAC,WAAW;6DAAC,QAAmB;MAC1CE,UAAmE,EACnEH,mBAAA,CASM,OATNI,UASM,G,gBAPNJ,mBAAA,CAAgH;IAAtGK,EAAE,EAAC,SAAS;+DAAUC,KAAA,CAAAC,OAAO,GAAAC,MAAA;IAAEC,IAAI,EAAC,IAAI;IAACC,IAAI,EAAC,IAAI;IAACC,QAAQ,EAAC,UAAU;IAACV,KAAK,EAAC;iDAAvDK,KAAA,CAAAC,OAAO,E,GAAyEK,UAAI,E,gBACpHZ,mBAAA,CAAqC;IAA9Ba,IAAI,EAAC,MAAM;+DAAUP,KAAA,CAAAQ,OAAO,GAAAN,MAAA;iDAAPF,KAAA,CAAAQ,OAAO,E,GACnCd,mBAAA,CAAsD;IAA9Ca,IAAI,EAAC,QAAQ;IAAEE,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAAES,QAAA,CAAAC,OAAO;KAAI,MAAI,GAC7CC,UAAK,EAAAC,UAAK,E,iBAAA,MACP,G,gBAAApB,mBAAA,CAAkC;IAA3Ba,IAAI,EAAC,MAAM;+DAAUP,KAAA,CAAAe,IAAI,GAAAb,MAAA;iDAAJF,KAAA,CAAAe,IAAI,E,GACnCrB,mBAAA,CAAyC;IAAhCe,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAAES,QAAA,CAAAK,QAAQ;KAAI,MAAI,GAChCtB,mBAAA,CAAyC;IAAhCe,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAAES,QAAA,CAAAM,QAAQ;KAAI,MAAI,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}