{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-768c4458\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"content\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", null, \"火炬行动\", -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, _hoisted_4, _hoisted_5, _withDirectives(_createElementVNode(\"textarea\", {\n    id: \"content\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.content = $event),\n    cols: \"60\",\n    rows: \"30\",\n    readonly: \"readonly\",\n    class: \"myTextStyle\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.content]]), _hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.message = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.message]]), _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[2] || (_cache[2] = $event => $options.sendMsg())\n  }, \"发送消息\"), _hoisted_7, _hoisted_8, _createTextVNode(\" 用户：\"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.user = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.user]]), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = $event => $options.joinRoom())\n  }, \"加入群聊\"), _createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = $event => $options.exitRoom())\n  }, \"退出群聊\")]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","id","$data","content","$event","cols","rows","readonly","_hoisted_6","type","message","onClick","_cache","$options","sendMsg","_hoisted_7","_hoisted_8","user","joinRoom","exitRoom"],"sources":["D:\\Work\\大三上\\java\\endOfTermProj\\Java-EE-Police-Affair-System\\front\\dbproject\\src\\components\\SecretChat.vue"],"sourcesContent":["<template>\n  <div class=\"content\">\n  <br><strong>火炬行动</strong><br/><br/>\n  <textarea id=\"content\" v-model=\"content\" cols=\"60\" rows=\"30\" readonly=\"readonly\" class=\"myTextStyle\"></textarea><br>\n  <input type=\"text\" v-model=\"message\">\n  <button type=\"button\" @click=\"sendMsg()\">发送消息</button>\n  <br/><br/>\n  用户：<input type=\"text\" v-model=\"user\">\n  <button @click=\"joinRoom()\">加入群聊</button>\n  <button @click=\"exitRoom()\">退出群聊</button>\n  </div>\n</template>\n<script>\nimport WebSocket from 'ws';\nexport default {\ndata() {\n  return {\n    url: 'ws://localhost:7078/Room/',\n    ws: null,\n    user: '',\n    message: '',\n    content: '',\n  }\n},\ncreated(){\n},\nmethods: {\n  async joinRoom(){\n    if(this.ws) {\n      alert(\"你已经再聊天室\");\n      return;\n    }\n    let url = this.url;\n    let username = this.user;\n    this.ws = new WebSocket('wss://localhost:7078/Room/' + username);  // 后端的启动端口\n    this.ws.onopen = this.webscoketonopen;\n    this.ws.onmessage =  this.webscoketonmessage;\n    //发生错误触发\n    this.ws.onerror = function (event) {\n      console.log(\"连接错误\"+event)\n    };\n    //正常关闭触发\n    this.ws.onclose = function () {\n      console.log(\"连接关闭\");\n    };\n  }, \n  webscoketonopen(){\n    console.log(\"与服务器成功建立连接\");\n  },\n  webscoketonmessage(value){\n    console.log(value);\n    this.content += (value.data + '\\r\\n') ;\n  },\n  exitRoom(){\n    this.closeWebSocket();\n  },\n  sendMsg(){\n    if(!this.ws) {\n      alert('你已经掉线，请重新加入');\n      return;\n    }\n    if(this.ws.readyState === 1){\n      this.ws.send(this.message);\n      this.message = '';\n    } else {\n      alert('发送失败');\n    }\n  },\n  closeWebSocket(){\n    if(this.ws) {\n      this.ws.close();\n      this.ws = null;\n    }\n  },\n  talking(content) {\n    console.log(content);\n  }\n}\n}\n</script>\n<style scoped>\n.content {\n    width: 50%;\n    min-width: 1000px;\n    position: relative;\n    box-shadow: 0px 0px 10px 2px rgba(123, 103, 75, 0.427);\n    background-color: rgba(255, 255, 255, 0.616); \n    margin-bottom: 30px;\n    left:200px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n    margin-top: 16px;\n    padding: 16px;\n    border-radius: 5px;\n    box-shadow: #9a9a9a 0px 0px 6px;\n    box-shadow: #777777 0px 0px 3px;\n    border-top: #0051ff 3px solid;\n    border-top: solid 3px transparent;\n  }\n  \n  .content:hover {\n    border-top-color: #c1a04d;\n  }\n  \n  .content {\n    transition: border-top-color 0.3s;\n  }\n  \n  .content:hover {\n    transition: border-top-color 0.3s;\n  }\n.roomStyle{\ntext-align: center;\nbackground-color: #e6dbc1;\nmargin: 0 auto;\nborder: 1px solid #000;\nwidth: 800px;\nheight: 650px\n}\n.myTextStyle{\n  width: 700px;\n}\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAS;gEACpBC,mBAAA,CAAI;gEAAAA,mBAAA,CAAqB,gBAAb,MAAI;gEAASA,mBAAA,CAAK;gEAAAA,mBAAA,CAAK;gEAC6EA,mBAAA,CAAI;gEAGpHA,mBAAA,CAAK;gEAAAA,mBAAA,CAAK;;;uBALVC,mBAAA,CASM,OATNC,UASM,GARNC,UAAI,EAAAC,UAAqB,EAAAC,UAAK,EAAAC,UAAK,E,gBACnCN,mBAAA,CAAgH;IAAtGO,EAAE,EAAC,SAAS;+DAAUC,KAAA,CAAAC,OAAO,GAAAC,MAAA;IAAEC,IAAI,EAAC,IAAI;IAACC,IAAI,EAAC,IAAI;IAACC,QAAQ,EAAC,UAAU;IAACd,KAAK,EAAC;iDAAvDS,KAAA,CAAAC,OAAO,E,GAAyEK,UAAI,E,gBACpHd,mBAAA,CAAqC;IAA9Be,IAAI,EAAC,MAAM;+DAAUP,KAAA,CAAAQ,OAAO,GAAAN,MAAA;iDAAPF,KAAA,CAAAQ,OAAO,E,GACnChB,mBAAA,CAAsD;IAA9Ce,IAAI,EAAC,QAAQ;IAAEE,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAAES,QAAA,CAAAC,OAAO;KAAI,MAAI,GAC7CC,UAAK,EAAAC,UAAK,E,iBAAA,MACP,G,gBAAAtB,mBAAA,CAAkC;IAA3Be,IAAI,EAAC,MAAM;+DAAUP,KAAA,CAAAe,IAAI,GAAAb,MAAA;iDAAJF,KAAA,CAAAe,IAAI,E,GACnCvB,mBAAA,CAAyC;IAAhCiB,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAAES,QAAA,CAAAK,QAAQ;KAAI,MAAI,GAChCxB,mBAAA,CAAyC;IAAhCiB,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAAES,QAAA,CAAAM,QAAQ;KAAI,MAAI,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}